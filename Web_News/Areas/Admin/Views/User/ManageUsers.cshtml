@model List<Web_News.Models.User>

<div>
    <a href="@Url.Action("ManageUsers", new { status = "active" })" class="btn @((ViewBag.CurrentStatus == "active") ? "btn-danger" : "btn-secondary")">Tài khoản hoạt động</a>
    <a href="@Url.Action("ManageUsers", new { status = "locked" })" class="btn @((ViewBag.CurrentStatus == "locked") ? "btn-danger" : "btn-secondary")">Tài khoản bị khóa</a>
    <a href="@Url.Action("ManageUsers", new { status = "deleted" })" class="btn @((ViewBag.CurrentStatus == "deleted") ? "btn-danger" : "btn-secondary")">Tài khoản đã xóa</a>
</div>

<div class="col-lg-12 grid-margin stretch-card">
    <div class="card">
        <div class="card-body">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Tên người dùng</th>
                        <th>Email</th>
                        <th>Địa chỉ</th>
                        <th>SĐT</th>
                        <th>Tên tài khoản</th>
                        <th>Ngày đăng ký</th>
                        <th>Trạng thái tài khoản</th>
                        <th>Hành động</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var user in Model)
                    {
                        <tr>
                            <td>@user.Name</td>
                            <td>@user.Email</td>
                            <td>@user.Address</td>
                            <td>@user.Phone</td>
                            <td>@user.UserName</td>
                            <td>@user.RegistrationDate.ToString("dd/MM/yyyy")</td>
                            <td>
                                <span class="badge  @(user.AccountStatus ? "bg-danger" : "bg-success")">
                                        @(user.AccountStatus ? "Đã khóa" : "Hoạt động")
                                 </span> 
                             </td>
                            <td>
                                @if (ViewBag.CurrentStatus == "active")
                                {
                                    <a href="@Url.Action("EditUser", new { userId = user.UserID })" class="btn btn-info btn-sm">Sửa</a>
                                    <form asp-action="DeleteUser" method="post" onsubmit="return confirm('Bạn có chắc chắn muốn xóa tài khoản này?');" style="display:inline;">
                                        <input type="hidden" name="userId" value="@user.UserID" />
                                        <button type="submit" class="btn btn-danger btn-sm">Xóa</button>
                                    </form>
                                    <form method="post" action="@Url.Action("AccountStatus", new { userId = user.UserID })" style="display:inline;">
                                        <button type="submit" class="btn btn-danger btn-sm">Khóa</button>
                                    </form>
                                }
                                else if (ViewBag.CurrentStatus == "locked")
                                {
                                    <form method="post" action="@Url.Action("AccountStatus", new { userId = user.UserID })" style="display:inline;">
                                        <button type="submit" class="btn btn-success btn-sm">Mở khóa</button>
                                    </form>
                                    <form asp-action="DeleteUser" method="post" onsubmit="return confirm('Bạn có chắc chắn muốn xóa tài khoản này?');" style="display:inline;">
                                        <input type="hidden" name="userId" value="@user.UserID" />
                                        <button type="submit" class="btn btn-danger btn-sm">Xóa</button>
                                    </form>
                                }
                               
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>
