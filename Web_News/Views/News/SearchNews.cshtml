﻿
@model Web_News.ViewModels.SearchWithAdsViewModel

@{
    ViewBag.title = "Tìm Kiếm";
}
<head>
    <style>
        body {
            font-family: Arial, sans-serif; /* Thiết lập font chữ Arial */
            font-size: 15px; /* Kích thước chữ 15px */
            font-weight: 400; /* Trọng số chữ 400 (bình thường) */
        }

        .container {
            max-width: 1000px;
            font-family: Arial, sans-serif; /* Thiết lập font chữ Arial */
            font-size: 15px; /* Kích thước chữ 15px */
            font-weight: 400; /* Trọng số chữ 400 (bình thường) */
        }

        .main-content {
            max-width: 670px; /* Đặt chiều rộng tối đa cho khung chứa biểu mẫu */
            margin: 20px auto; /* Căn giữa biểu mẫu trên trang */
            padding: 20px; /* Thêm một ít khoảng đệm */
            border-radius: 8px; /* Bo tròn các góc */
        }

        .form-group {
            margin-bottom: 15px; /* Khoảng cách giữa các nhóm biểu mẫu */
        }

        label {
            font-size: 15px;
            font-weight: bold; /* Nhấn mạnh chữ đậm cho nhãn */
            margin-bottom: 5px; /* Khoảng cách giữa nhãn và ô nhập liệu */
            display: block; /* Làm cho nhãn thành phần khối */
        }

        .form-control {
            width: 100%; /* Ô nhập liệu chiếm toàn bộ chiều rộng */
            padding: 10px; /* Khoảng đệm cho ô nhập liệu */
            border: 1px solid #ccc; /* Màu đường viền */
            border-radius: 4px; /* Bo tròn các góc của ô nhập liệu */
            box-sizing: border-box; /* Bao gồm khoảng đệm và đường viền trong chiều rộng */
            transition: border-color 0.3s; /* Hiệu ứng chuyển đổi màu đường viền mượt mà */
        }

            .form-control:focus {
                border-color: #808080; /* Thay đổi màu đường viền khi ô được chọn */
                outline: none; /* Xóa viền ngoài */
            }

        select.form-control {
            appearance: none; /* Xóa mũi tên mặc định của ô chọn */
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>') no-repeat right 10px center; /* Mũi tên tùy chỉnh */
            background-size: 12px; /* Kích thước của mũi tên tùy chỉnh */
        }

        button.btn {
            width: 100%; /* Nút chiếm toàn bộ chiều rộng */
            padding: 10px; /* Khoảng đệm cho nút */
            font-size: 16px; /* Kích thước chữ */
            border: none; /* Xóa đường viền mặc định */
            border-radius: 4px; /* Bo tròn các góc của nút */
            cursor: pointer; /* Con trỏ chuột */
            transition: background-color 0.3s; /* Hiệu ứng chuyển đổi màu nền mượt mà */
        }

        button.btn-primary {
            background-color: #808080; /* Màu nút chính */
            color: white; /* Màu chữ trên nút */
        }

            button.btn-primary:hover {
                background-color: #696969; /* Màu tối hơn khi di chuột qua */
            }

        .sidebar {
            width: 250px; /* Độ rộng của sidebar */
            margin-top: 50px;
        }
        .pagination {
    display: flex;
    justify-content: center;
    padding: 0;
    margin: 20px 0;
    list-style: none;
}

.page-item {
    margin: 0 5px;
}

.page-link {
            color: #808080;
    text-decoration: none;
    padding: 8px 12px;
    border: 1px solid #ddd;
    border-radius: 4px;
    transition: background-color 0.3s, color 0.3s;
}

.page-link:hover {
    background-color: #f8f9fa;
                color: #808080;
}

.page-item.active .page-link {
            background-color: #808080;
    color: white;
            border-color: #808080;
}

.page-item.disabled .page-link {
    color: #6c757d;
    pointer-events: none;
    background-color: #e9ecef;
    border-color: #ddd;
}

.page-link span[aria-hidden="true"] {
    font-size: 14px;
}




    </style>
</head>

<body>
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <div class="container">
        <div class="main-content">
            <form method="get" asp-action="SearchNews" asp-controller="News" onsubmit="return validateSearchForm()">
                <input type="hidden" value="@Model.CategoryId" />

                <div class="form-group">
                    <label for="searchQuery">Từ khóa tìm kiếm</label>
                    <input type="text" id="searchQuery" name="searchQuery" class="form-control" value="@Model.SearchQuery" placeholder="Search news...">
                </div>

                <div class="form-group">
                    <label for="startDate">Ngày bắt đầu</label>
                    <input type="date" name="startDate" class="form-control" value="@Model.StartDate?.ToString("yyyy-MM-dd")">
                </div>

                <div class="form-group">
                    <label for="endDate">Ngày kết thúc</label>
                    <input type="date" name="endDate" class="form-control" value="@Model.EndDate?.ToString("yyyy-MM-dd")">
                </div>

                <div class="form-group">
                    <label for="categoryId">Thể loại</label>
                    <select name="categoryId" class="form-control">
                        <option value="0">All Categories</option>
                        @foreach (var category in Model.Categories)
                        {
                            <!option value="@category.CategoryId" @(category.CategoryId == Model.CategoryId ? "selected" : "")>
                                @category.NameCategory
                            </!option>
                        }
                    </select>
                </div>

                <button type="submit" class="btn btn-primary">Tìm kiếm</button>
            </form>

            <!-- Kết quả tìm kiếm bài viết -->
            <div>
                <h3>Search Results</h3>
                @if (!Model.LatestNews.Any())
                {
                    <p>Không có bài viết nào được tìm thấy.</p>
                }
                else
                {
                    @foreach (var news in Model.LatestNews)
                    {
                        <article class="grid-item-small article">
                            <a class="article-link" href="@Url.Action("Privacy", "Home", new { id = news.NewsId })">
                                <div class="article-header">
                                    <img src="/Images/@news.Image" alt="@news.Title" />
                                    <div class="article-content">
                                        <h3>@news.Title</h3>
                                    </div>
                                </div>
                                <p>@Html.Raw(news.Content?.Substring(0, Math.Min(news.Content.Length, 100)))...</p>
                            </a>
                            <p>Ngày đăng: @news.PublishDate.ToString("dd/MM/yyyy")</p>
                        </article>
                    }
                }

                <nav aria-label="Page navigation example">
                    <ul class="pagination">
                        <!-- Nút lui (luôn hiển thị) -->
                        <li class="page-item @(Model.PageNumber == 1 ? "disabled" : "")">
                            <a class="page-link" href="@(Model.PageNumber == 1 ? "#" : Url.Action("SearchNews", new { pageNumber = Model.PageNumber - 1, searchQuery = Model.SearchQuery, categoryId = Model.CategoryId, startDate = Model.StartDate, endDate = Model.EndDate }))" aria-label="Previous">
                                <span aria-hidden="true">&laquo;</span>
                                <span class="sr-only">Previous</span>
                            </a>
                        </li>

                        <!-- Hiển thị số trang -->
                        @for (var i = 1; i <= Model.TotalPages; i++)
                        {
                            <li class="page-item @(i == Model.PageNumber ? "active" : "")">
                                <a class="page-link" href="@Url.Action("SearchNews", new { pageNumber = i, searchQuery = Model.SearchQuery, categoryId = Model.CategoryId, startDate = Model.StartDate, endDate = Model.EndDate })">@i</a>
                            </li>
                        }

                        <!-- Nút tới (luôn hiển thị) -->
                        <li class="page-item @(Model.PageNumber == Model.TotalPages ? "disabled" : "")">
                            <a class="page-link" href="@(Model.PageNumber == Model.TotalPages ? "#" : Url.Action("SearchNews", new { pageNumber = Model.PageNumber + 1, searchQuery = Model.SearchQuery, categoryId = Model.CategoryId, startDate = Model.StartDate, endDate = Model.EndDate }))" aria-label="Next">
                                <span aria-hidden="true">&raquo;</span>
                                <span class="sr-only">Next</span>
                            </a>
                        </li>
                    </ul>
                </nav>


            </div>

        </div>
        <!-- Phần quảng cáo bên phải -->
        <aside class="sidebar">
            @foreach (var ad in Model.SidebarAdvertisements)
            {
                <div class="sidebar-section">
                    <div class="vertical-banner">
                        <a href="@ad.Link" target="_blank">
                            <img src="~/ImagesAdvertisement/@ad.Image" alt="Quảng Cáo Dọc">
                        </a>
                    </div>
                </div>
            }
        </aside>
    </div>
</body>


<script>
    function validateSearchForm() {
        var searchInput = document.getElementById('searchQuery').value.trim();
        if (searchInput === "") {
            return false;
        }
        return true;
    }
</script>